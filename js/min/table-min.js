function the_table(t,e,a,r,d,o,s,n,l,y,h,i,p){d3.tsv("yield-rates.tsv",function(f){var c,v,u,b,m,g,k,Y,D,I,w,C,F,E,N=new Array,A={healthy:null,untreated:null,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},R={healthy:null,untreated:null,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},x={healthy:0,untreated:1,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},j={healthy:"Healthy, untreated",untreated:"Infected, untreated","25y3":"25% DCE treatment adopted year 3","25y5":"25% DCE treatment adopted year 5","25y10":"25% DCE treatment adopted year 10","50y3":"50% DCE treatment adopted year 3","50y5":"50% DCE treatment adopted year 5","50y10":"50% DCE treatment adopted year 10","75y3":"75% DCE treatment adopted year 3","75y5":"75% DCE treatment adopted year 5","75y10":"75% DCE treatment adopted year 10"},M=Object.keys(j),T=1/(1+t/100);healthyYields=[n,l,y,h,i,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p],untreatedYields=[];for(var O in healthyYields)untreatedYields[O]=healthyYields[O]*f[O].noAction/100;costs=[e,a,r,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d];var P=[];for(var O in untreatedYields)P[O]=s*untreatedYields[O]-costs[O];console.log("untreatedNR:"),console.log(P);var B=[];for(var O in P){var H=Math.pow(T,O);B[O]=P[O]*H}console.log("untreatedDNR:"),console.log(B);for(var L=[B[0]],O=1;O<B.length;O++)L[O]=B[O]+L[O-1];console.log("untreatedCDNR:"),console.log(L);for(var S=[s*healthyYields[0]-costs[0]],U="-",O=1;O<healthyYields.length;O++){var H=Math.pow(T,O);S[O]=(s*healthyYields[O]-costs[O])*H+S[parseInt(O-1)],S[O]>S[parseInt(O-1)]&&(U=O)}var _=S[25]-L[25];_=0>_?"-$"+parseFloat(-1*_).toFixed(2):"$"+parseFloat(_).toFixed(2);var q=-1;for(var O in S)if(S[O+1]>0){q=O;break}-1==q&&(q="Never breaks even",U="-"),c=[];for(var O in S)c[O]=S[O]-L[O];for(var z=0;B[z]<0&&25>z;)z++;if(25==z)z="Untreated vineyard never profitable";else{for(;B[z]>0&&25>z;)z++;z-=1}var G="<hr /><h2>Results</h2><table><thead><th><h4>Scenario</h4></th><th><h4>ACDNB</h4></th><th><h4>Age adoption pays off</h4></th><th><h4>Last profitable year</h4></th><th><h4>Infection probability threshold</h4></th></thead><tbody>";G+="<tr><td>"+j.healthy+"</td><td>"+_+"</td><td>"+q+"</td><td>"+U+"</td><td>0</td></tr>",G+="<tr><td>"+j.untreated+"</td><td>-</td><td>-</td><td>"+z+"</td><td>1</td></tr>";for(var J=2;J<M.length;J++){for(var K=M[J],Q=parseInt(K.substr(3)),V=[],W=0;Q>W;W++)V[W]=0;for(var W=Q;26>W;W++)V[W]=o;var X=[];for(var O in healthyYields)X[O]=s*healthyYields[O]-costs[O]-V[O];var Z=[];for(var O in X){var H=Math.pow(T,O);Z[O]=X[O]*H}for(var tt=[Z[0]],O=1;O<Z.length;O++)tt[O]=Z[O]+tt[O-1];w=[];for(var O in healthyYields)w[O]=healthyYields[O]*f[O][K]/100;C=[];for(var O in w)C[O]=s*w[O]-costs[O]-V[O];F=[];for(var O in C){var H=Math.pow(T,O);F[O]=C[O]*H}E=[F[0]];for(var O=1;O<F.length;O++)E[O]=F[O]+E[O-1];N=[parseInt(V[0])];for(var O=1;O<Z.length;O++)N[O]=parseInt(V[O])+parseInt(N[O-1]);var et=[];for(var O in E)et[O]=E[O]-L[O];switch(K){case"25y3":v=et;break;case"25y5":u=et;break;case"25y10":b=et;break;case"50y3":m=et;break;case"50y5":g=et;break;case"50y10":k=et;break;case"75y3":Y=et;break;case"75y5":D=et;break;case"75y10":I=et}for(var O in E)if(E[O]>L[O]){A[K]=O;break}for(0==A[K]&&E[0]<=L[0]&&(A[K]="Never breaks even"),R[K]=K.substr(3);C[parseInt(R[K])+1]<=0&&parseInt(R[K])<25;)R[K]++;if(25==parseInt(R[K]))R[K]="Treatment never profitable";else for(;C[parseInt(R[K])+1]>0&&parseInt(R[K])<25;)R[K]++;x[K]=(S[25]-tt[25])/(E[25]-tt[25]-(L[25]-S[25])),x[K]>1&&(x[K]=1),x[K]=x[K].toFixed(3);var at=null!=et[25]?et[25].toFixed(2):"-";"-"!=at&&0>at?at="-$"+parseFloat(-1*at).toFixed(2):"-"!=at&&(at="$"+parseFloat(at).toFixed(2)),G+="<tr><td>"+j[K]+"</td><td>"+at+"</td><td>"+A[K]+"</td><td>"+R[K]+"</td><td>"+x[K]+"</td></tr>"}G+='</tbody></table><p class="print-link"><a href="javascript:window.print()"><i class="fa fa-print" aria-hidden="true"></i> Print these results.</a></p><p class="adjust-link"><a href="#form" onclick="$(\'body,html\').stop(true,true).animate({scrollTop: $(\'#form\').offset().top - $(\'header\').height()}, \'500\', \'swing\');">Adjust parameters</a></p>',$(".results").html(G),$("body,html").stop(!0,!0).animate({scrollTop:$("#results").offset().top-$("header").height()},"500","swing")})}var t,a,eff,discount,cost0,cost1,cost2,cost3,pc,price,yield0,yield1,yield2,yield3,yield4,treatedCDNR,treatedDNR,treatedNR,treatedYields=new Array,costs,pcFtnOfT,isProfitable=new Array;