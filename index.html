<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Canker disease management options decision tool</title>
<meta name=viewport content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="css/all.css" />
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
</head>

<body>

<header>
	<h1>Canker disease management options decision tool</h1>
</h1>

<fieldset>
<h2 id="instructions">Instructions</h2>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus aliquet imperdiet mi, eget dignissim libero porttitor at. Nullam tincidunt feugiat dolor, id tincidunt dui malesuada eget. Vestibulum commodo vehicula turpis vestibulum ornare. Sed imperdiet quam consectetur, malesuada erat sit amet, fermentum turpis. Quisque ac pellentesque elit. Duis non turpis a lacus consectetur tempus eget porta magna. Nunc maximus scelerisque turpis, id rhoncus justo eleifend ut. Ut vel purus in turpis interdum consectetur a vitae ex.</p>
</fieldset>

<form action="" id="theform">

	<select name="region">
		<option value="cc">Central Coast</option>
		<option value="ns">Napa Sonoma</option>
		<option value="nc">Northern California</option>
		<option value="nsj">Northern San Joaquin</option>
		<option value="ssj">Southern San Joaquin</option>
	</select>

	<h3>Figure parameters</h3>
	<label><input type="checkbox" name="genfigure" checked="checked" />Generate figure</label>

	<fieldset class="figure">

		<h4>(1/2) Specify output options</h5>

		<h5>Display output as:</h5>
			<label><input type="radio" name="figuredisplay" value="netreturns" checked />Net returns <span class="show-for-medium-up">(thousands of $ per acre)</span></label>
			<label><input type="radio" name="figuredisplay" value="yield" />Yield <span class="show-for-medium-up">(tons per acre)</span></label>

		<h5>Aggregate output:</h5>
			<label><input type="radio" name="aggregatefig" value="cumulatively" checked="checked" />Cumulatively</label>
			<label><input type="radio" name="aggregatefig" value="annually" />Annually</label>

	</fieldset>

	<fieldset class="figure management">
		
		<h4>(2/2) Specify management scenario</h4>

		<h5>Select the management practices to consider:</h5>
			<label><input type="radio" name="practicefig" value="dp" />Delayed pruning</label>
			<label><input type="radio" name="practicefig" value="hp" />Hand-painted TopsinM</label>
			<label><input type="radio" name="practicefig" value="dbp" />Double pruning</label>

		<h5>Select anticipated efficacy:</h5>
			<label><input type="radio" name="efficacyfig" value="25" />25%</label>
			<label><input type="radio" name="efficacyfig" value="50" />50%</label>
			<label><input type="radio" name="efficacyfig" value="75" />75%</label>

	</fieldset>

	<h3>Table parameters</h3>
	<label><input type="checkbox" name="gentable" />Generate table (disabled)</label>

	<fieldset class="table" disabled="disabled">

		<h4>(1/2) Specify output options (not functional yet)</h5>

		<h5>Display output as:</h5>
			<label><input type="radio" name="tabledisplay" value="netreturns" checked />Net returns <span class="show-for-medium-up">(thousands of $ per acre)</span></label>
			<label><input type="radio" name="tabledisplay" value="yield" />Yield <span class="show-for-medium-up">(tons per acre)</span></label>

		<h5>Aggregate output:</h5>
			<label><input type="radio" name="aggregate" value="cumulatively" checked="checked" />Cumulatively</label>
			<label><input type="radio" name="aggregate" value="annually" />Annually</label>

	</fieldset>

	<fieldset class="table management" disabled="disabled">
		
		<h4>(2/2) Specify management scenario (not functional yet)</h4>

		<h5>Select the management practices to consider:</h5>
			<label><input type="radio" name="practice" value="dbp" />Delayed pruning</label>
			<label><input type="radio" name="practice" value="hp" />Hand-painted TopsinM</label>
			<label><input type="radio" name="practice" value="dp" />Double pruning</label>

		<h5>Select anticipated efficacy:</h5>
			<label><input type="radio" name="efficacy" value="25" />25%</label>
			<label><input type="radio" name="efficacy" value="50" />50%</label>
			<label><input type="radio" name="efficacy" value="75" />75%</label>

	</fieldset>

	<input type="submit" value="Display returns to this practice" />

</form>

<section class="results"></section>

<script type="text/javascript">
$(document).ready(function() {
	console.log('ready');
	$('input[name=figuredisplay]').change(function() {
		console.log('change');
		if (this.value == 'netreturns') {
			console.log('netreturns');
			$('input[name=aggregatefig]').each(function() {
				$(this).prop('disabled', false).prop('checked', false);
			});
			$('input[name=aggregatefig][value=cumulatively]').prop('checked', true);
			$('input[name=practicefig]').each(function() {
				$(this).prop('disabled', false);
			});
		}
		else if (this.value == 'yield') {
			console.log('yield');
			$('input[name=practicefig]').each(function() {
				$(this).prop('disabled', true);
			});
			$('input[name=aggregatefig][value=annually]').prop('checked', true).prop('disabled', true);
			$('input[name=aggregatefig][value=cumulatively').prop('disabled', true);
		}
	});
	$('input[name=genfigure]').change(function() {
		var figurestate = $(this).prop('checked');
		$('fieldset.figure').each(function() {
			$(this).prop('disabled', !figurestate);
		});
	});
	/*$('input[name=gentable]').change(function() {
		var figurestate = $(this).prop('checked');
		$('fieldset.table').each(function() {
			$(this).prop('disabled', !figurestate);
		});
	});*/
	
	$('#theform').submit(function(e) {
		e.preventDefault();
		var figoutput;
		console.log($('input[name=figuredisplay]:checked').val());
		switch ( $('input[name=figuredisplay]:checked').val() ) {
			case 'yield':
				console.log('case: yield.');
				figoutput = 'yield';
				break;
			case 'netreturns':
				console.log('case: netreturns.');
				console.log($('input[name=practicefig]:checked').val());
				figoutput = $('input[name=practicefig]:checked').val();
				break;
		};
		var fig = '<img src="images/figures/' + $('select[name=region]').val() + '-' + figoutput + $('input[name=efficacyfig]:checked').val() + '.png" alt="Graphical result" />';
		var assumptions = '<h3>Parameter Values Used in Calculations</h3><table><tr><td>Vineyard Lifespan</td><td>25 years</td></tr><tr><td>Discount Rate</td><td>5%</td></tr><tr><td>Base Dollar</td><td>2013</td></tr><tr><td>Yield per acre</td><td>Shown in figure</td></tr><tr><td>5-year Average Price per ton</td><td>$XXX</td></tr><tr><td>Cultivar</td><td>Cabernet Sauvignon (?)</td></tr><tr><td>Additional Cost from Delayed Pruning per acre</td><td>$0</td></tr><tr><td>Additional Cost from Double Pruning per acre</td><td>$XX</td></tr><tr><td>Additional Cost from Handpainting TopsinM per acre</td><td>$XXX</td></tr><tr><td>Cultural Cost - Year 0 - Establishing Vineyard</td><td>$XX,XXX</td></tr><tr><td>Cultural Cost - Year 1 - Establishing Vineyard</td><td>$XX,XXX</td></tr><tr><td>Cultural Cost - Year 2 - Establishing Vineyard</td><td>$XX,XXX</td></tr><tr><td>Cultural Cost - Year 3+ Established Vineyard</td><td>$XX,XXX</td></tr></table>';
		var results = fig + assumptions;
		console.log(results);
		$('.results').html(results);
	});
})
</script>

</body>
</html>